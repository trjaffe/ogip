#! /usr/bin/env python

from ogip_check_dir import ogip_check_dir

if __name__== "__main__":
    import argparse
    import sys
    parser = argparse.ArgumentParser()
    parser.add_argument("basedir", type=str, help="Input base directory to test")
    parser.add_argument("logdir", type=str, help="Output directory to write logs to, one per tested file")
    parser.add_argument("-v", "--verbosity", action="count", default=0)

    parser.add_argument("--ignore_dir",type=str,help="Comma-separated list of directory names to ignore;  default none.",default='')
    parser.add_argument("--ignore_suffix",type=str,help="Comma-separated list of file suffixes to ignore;  default=.jpg,.txt,.gif,.dat",default='.jpg,.txt,.gif,.dat')

    args = parser.parse_args()

    ignore={
        'suffixes':tuple(args.ignore_suffix.split(',') ),
        'directories':tuple(args.ignore_dir.split(',')),
    }
    status=ogip_check_dir(args.basedir,args.logdir,ignore,args.verbosity)
    exit(status)
